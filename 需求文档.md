1. MVP核心目标与范围​​
​​1.1. 核心目标​​
快速开发并上线一个功能简洁但体验流畅的诗词网站。核心是验证“AI赋能诗词赏析”这一核心价值点是否能吸引和留住用户。MVP将专注于​​内容展示​​和​​核心AI交互​​，暂不开发复杂的用户系统和社区功能。
​​1.2. 范围界定 (In-Scope)​​
​​前端：​​ 基于Vue 3的响应式网站。
​​数据层：​​ 使用Supabase存储和管理所有数据（诗词、诗人、AI赏析）。
​​用户认证：​​ 采用Supabase内置的第三方登录（如GitHub、Google）和邮箱密码登录。
​​核心功能：​​
诗词浏览与搜索。
诗词详情页查看（包含AI生成赏析）。
基础的AI问答交互（围绕当前浏览的诗词）。
​​管理后台：​​ 一个简单的管理界面，用于录入和管理诗词、诗人数据。
​​1.3. 范围排除 (Out-of-Scope)​​
复杂的用户个人中心（如学习报告、个人诗库）。
UGC（用户生成内容）系统，如用户评论、发布赏析。
个性化推荐算法。
复杂的知识图谱可视化探索。
付费功能。
​​2. 技术架构 (MVP简化版)​​
​​2.1. 架构图​​
用户浏览器 (Vue 3 App)<-> Supabase (API + 数据库 + 认证)<-> AI服务 (OpenAI/GLM API)
​​2.2. 技术选型与职责​​
​​前端 (Vue 3 Composition API)​​
​​框架：​​ Vue 3
​​路由：​​ Vue Router
​​状态管理：​​ Pinia (用于管理用户状态、诗词列表等)
​​UI库：​​ Element Plus 或 Naive UI (快速构建界面)
​​HTTP客户端：​​ Supabase JavaScript Client
​​后端 (Supabase as BaaS)​​
​​数据库：​​ PostgreSQL (由Supabase托管)
​​认证：​​ Supabase Auth
​​API：​​ Supabase RESTful API 和实时API
​​服务器端逻辑：​​ Supabase Edge Functions (用于安全地调用AI API)
​​AI服务​​
​​提供商：​​ OpenAI GPT-4 API 或 国内主流大模型API
​​集成方式：​​ 通过Supabase Edge Functions调用，避免前端暴露API密钥。
​​2.3. 数据流 (以AI生成为例)​​
用户在诗词详情页点击“AI赏析”按钮。
Vue前端调用一个安全的Supabase Edge Function，并将诗词ID作为参数传递。
Edge Function 从Supabase数据库中获取诗词的完整信息（标题、作者、内容）。
Edge Function 构造Prompt，并调用AI服务商API。
AI API返回生成的赏析内容。
Edge Function 将赏析内容返回给Vue前端。
Vue前端将赏析内容展示给用户。
​​3. MVP功能需求​​
​​3.1. 公开页面 (无需登录可访问)​​
​​FE01 - 首页​​
​​功能：​​ 展示网站简介、热门诗词列表（按浏览量或手动推荐）、诗词搜索框。
​​技术：​​ 静态页面，调用Supabase获取诗词列表。
​​FE02 - 诗词列表页​​
​​功能：​​ 分页展示所有诗词。支持按朝代、作者筛选。支持按诗词名/内容关键词搜索。
​​技术：​​ 使用Supabase的select、filter、range进行数据查询。
​​FE03 - 诗人列表页​​
​​功能：​​ 展示所有诗人列表，点击可进入诗人详情页。
​​FE04 - 诗人详情页​​
​​功能：​​ 展示诗人简介、生平。列表展示该诗人的所有诗词。
​​3.2. 核心功能页 (需登录后访问)​​
​​FE05 - 诗词详情页 (MVP核心)​​
​​功能：​​
展示诗词基本信息：标题、朝代、作者、正文。
展示​​译文​​（存储在Supabase中，作为静态数据）。
​​【核心功能】AI赏析​​：一个按钮，点击后调用AI生成对该诗词的赏析（背景、意境、手法分析）。生成内容需流式输出以提升体验。
​​【核心功能】AI问答​​：一个简单的聊天窗口，用户可以就当前诗词提问（如“这句诗是什么意思？”，“作者表达了什么情感？”）。问题上下文仅限于当前诗词。
​​技术：​​ 使用Supabase Edge Function封装AI调用，Vue前端使用SSE或WebSocket接收流式响应。
​​3.3. 用户系统​​
​​AUTH01 - 用户登录/注册​​
​​功能：​​ 提供邮箱/密码注册登录，以及至少一种第三方登录（如GitHub）。
​​技术：​​ 完全使用Supabase Auth。
​​3.4. 管理后台 (简易版)​​
​​ADMIN01 - 管理仪表盘​​
​​功能：​​ 受保护的路由，仅管理员可访问。
​​ADMIN02 - 诗词管理​​
​​功能：​​ 对诗词数据进行增、删、改、查。
​​ADMIN03 - 诗人管理​​
​​功能：​​ 对诗人数据进行增、删、改、查。
​​4. 数据模型 (Supabase表结构)​​
以下是MVP所需的核心表：
​​1. poets(诗人表)​​
id(bigint, primary key)
name(text, 诗人姓名)
dynasty(text, 朝代)
bio(text, 生平简介)
created_at(timestamp)
​​2. poems(诗词表)​​
id(bigint, primary key)
title(text, 诗词标题)
content(text, 正文，格式化为字符串)
poet_id(bigint, foreign key -> poets.id)
dynasty(text, 冗余存储，便于查询)
translation(text, 译文)
view_count(int, 浏览量)
created_at(timestamp)
​​3. profiles(用户信息表，Supabase Auth自动创建auth.users的扩展)​​
id(uuid, primary key, matches auth.users.id)
username(text)
avatar_url(text)
updated_at(timestamp)
​​4. ai_interaction_logs(AI交互日志表，用于分析和监控)​​
id(bigint, primary key)
user_id(uuid, foreign key -> profiles.id)
poem_id(bigint, foreign key -> poems.id)
prompt(text, 用户提问或指令)
ai_response(text, AI返回内容)
model_used(text, 使用的AI模型)
token_usage(json, 记录消耗的token数)
created_at(timestamp)
​​5. MVP非功能性需求​​
​​性能：​​
首屏加载时间 < 3秒。
AI问答首字响应时间 < 3秒。
​​安全性：​​
AI API密钥必须存储在Supabase Edge Function环境变量中，​​严禁​​在前端暴露。
使用Supabase RLS（行级安全）策略，控制数据访问权限（例如，只有管理员能写poems表）。
​​可维护性：​​
前端代码结构清晰，组件化开发。
SQL脚本和数据库迁移方案需文档化。
​​6. MVP成功指标 (KPI)​​
​​用户获取：​​ 首月注册用户数。
​​用户参与度：​​
平均每会话浏览诗词数量。
平均每用户AI交互次数。
“AI赏析”按钮的点击率。
​​技术稳定性：​​ 网站总体可用性 > 99.5%。
​​用户反馈：​​ 通过简单的问卷或反馈入口收集早期用户对“AI赏析”功能的评价。
​​7. 后续版本规划​​
​​V1.1：​​ 增加用户收藏、评论功能。
​​V1.2：​​ 开发个人中心，展示阅读历史和个人收藏。
​​V1.3：​​ 引入基于用户行为的简单个性化推荐。
​​Future：​​ 逐步向最初愿景中的完整架构演进。
